<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Positioning System • r2slides</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="positioning-system_files/libs/quarto-html/popper.min.js"></script><script src="positioning-system_files/libs/quarto-html/tippy.umd.min.js"></script><link href="positioning-system_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="positioning-system_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Positioning System">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">r2slides</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.9056</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/positioning-system.html">Positioning System</a></li>
    <li><a class="dropdown-item" href="../articles/styles.html">Text Styling and Style Rules</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Adam-Hubbs/r2slides/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Positioning System</h1>




      <small class="dont-index">Source: <a href="https://github.com/Adam-Hubbs/r2slides/blob/main/vignettes/articles/positioning-system.qmd" class="external-link"><code>vignettes/articles/positioning-system.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <section class="level2"><h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>When building presentations programmatically, you need a robust system for controlling where objects appear on slides. The <code>r2slides</code> package provides exactly that through its positioning system, which treats every visual element—whether text, charts, or shapes—as a geometric object with explicit coordinates and dimensions.</p>
<p>The core abstraction is a <code>slide_position</code> object that captures location (top and left coordinates), size (width and height), rotation angle, and slide dimensions. All measurements are expressed in inches, which keeps the system intuitive and aligned with how designers typically think about slide layouts.</p>
<p>This positioning system is designed around several key principles: positions are explicit geometric objects, transformations are functional and composable, and layout logic can be abstracted and reused. Instead of scattering numeric coordinates throughout your slide-building code, you define positions once and reuse or transform them declaratively, enabling scalable slide generation across many datasets and presentations.</p>
</section><section class="level2"><h2 id="creating-a-position">Creating a Position<a class="anchor" aria-label="anchor" href="#creating-a-position"></a>
</h2>
<p>You create positions using the <code><a href="../reference/slide_position.html">slide_position()</a></code> function, which takes coordinates and dimensions as its arguments. By default, slides are assumed to be 10 × 5.625 inches, matching Google Slides’ default dimensions, though you can specify different slide sizes when needed.<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;This is implemented through the slide_slide, old_slide_size, and convert arguments. This makes it possible to build your slide position objects with another system (say PowerPoint) that has different slide sizes, and automatically convert them to the google slides size. This functionality is currently in beta.&lt;/p&gt;"><sup>1</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/slide_position.html">slide_position</a></span><span class="op">(</span></span>
<span>  top <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  left <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p>This creates a rectangle positioned 1 inch from the top of the slide and 2 inches from the left edge, with dimensions of 4 inches wide by 2 inches tall. The coordinate system follows standard conventions: positions are defined relative to the top-left corner of the slide, with <code>top</code> increasing downward and <code>left</code> increasing to the right.</p>
<p>When you need to visualize what a position looks like during development, <code>slide_position</code> objects implement a <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method that makes it easy to inspect layouts without rendering a full slide:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pos</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="positioning-system_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This visual feedback can be faster than actually putting elements in the location on a slide. The thicker line indicates which side is considered the ‘top’ of the position, which becomes important when you start applying rotations.</p>
</section><section class="level2"><h2 id="understanding-rotation">Understanding Rotation<a class="anchor" aria-label="anchor" href="#understanding-rotation"></a>
</h2>
<p>Rotation adds another dimension to positioning. When you specify a rotation angle in degrees, the object rotates clockwise around its center point. Critically, rotation doesn’t change the object’s intrinsic width and height—instead, it’s applied as an affine transformation.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rotated</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/slide_position.html">slide_position</a></span><span class="op">(</span></span>
<span>  top <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  left <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  rotation <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This distinction between intrinsic dimensions and rotated footprint becomes important in advanced layouts. The positioning system handles rotation correctly through computed affine transform components (scaleX, scaleY, shearX, shearY), ensuring that rotated objects render properly. For when you want to understand the un-rotated bounding boxes, the <code><a href="../reference/bounding_box.html">bounding_box()</a></code> function calculates the smallest axis-aligned rectangle that contains one or more rotated objects.</p>
<p><code>r2slides</code> provides a few convenient helpers for common positions. Functions like <code><a href="../reference/slide-position-helpers.html">in_top_left()</a></code>, <code><a href="../reference/slide-position-helpers.html">in_top_middle()</a></code>, and <code><a href="../reference/slide-position-helpers.html">in_bottom_right()</a></code> return pre-configured <code>slide_position</code> objects sized appropriately for typical content placement. There is really nothing special about these functions or their positioning, they are just some defaults.</p>
</section><section class="level2"><h2 id="the-power-of-relative-positioning">The Power of Relative Positioning<a class="anchor" aria-label="anchor" href="#the-power-of-relative-positioning"></a>
</h2>
<p>This is where the positioning system truly shines. Static coordinates work fine for one-off slides, but programmatic slide generation demands flexibility. You rarely want objects at exactly the same position every time—instead, you want to express layout intent: “place this annotation slightly above the chart” or “position this label to the right of that element.”</p>
<p>The <code><a href="../reference/relative_position.html">relative_position()</a></code> function enables exactly this kind of declarative positioning. It takes an existing position and applies transformations to create a new position, leaving the original unchanged. Each dimension—top, left, width, and height—can be transformed independently using either a function or a scalar numeric value.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">base</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/slide_position.html">slide_position</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Move the object right by 0.5 inches</span></span>
<span><span class="va">moved</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/relative_position.html">relative_position</a></span><span class="op">(</span></span>
<span>  <span class="va">base</span>,</span>
<span>  left_transformation <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">0.5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set an absolute top position</span></span>
<span><span class="va">absolute_top</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/relative_position.html">relative_position</a></span><span class="op">(</span></span>
<span>  <span class="va">base</span>,</span>
<span>  top_transformation <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>When you pass a function as a transformation, it receives the original value and returns the new value. When you pass a scalar numeric, it replaces the original value entirely. This dual interface handles both relative adjustments (“move right by half an inch”) and absolute replacements (“set the width to exactly 3 inches”).</p>
<p>The real power emerges when you combine relative positioning with the fact that it always returns a new <code>slide_position</code> object. This functional approach means you can chain transformations, compose them programmatically, and reuse positioning logic without side effects or hidden state.</p>
</section><section class="level2"><h2 id="defining-reusable-transformation-functions">Defining Reusable Transformation Functions<a class="anchor" aria-label="anchor" href="#defining-reusable-transformation-functions"></a>
</h2>
<p>In real-world slide generation workflows, you rarely apply transformations just once. You have layout patterns that repeat: annotations that always appear above charts in a specific way, delta indicators positioned consistently relative to their base elements, titles that maintain standard spacing relationships.</p>
<p>Writing out <code><a href="../reference/relative_position.html">relative_position()</a></code> calls repeatedly would quickly become tedious and error-prone. Instead, <code><a href="../reference/define_relative_transformation_function.html">define_relative_transformation_function()</a></code> lets you capture transformation logic in reusable functions.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">annotation_transform</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_relative_transformation_function.html">define_relative_transformation_function</a></span><span class="op">(</span></span>
<span>  top_transformation <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">-</span> <span class="fl">0.5</span>,</span>
<span>  width_transformation <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  height_transformation <span class="op">=</span> <span class="fl">0.25</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This creates a function that takes a <code>slide_position</code> and returns a transformed version. You can think of it as a version of relative_position, but with the transformations pre-programmed.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/add_text.html">add_text</a></span><span class="op">(</span><span class="st">"Label"</span>, <span class="fu"><a href="../reference/slide-position-helpers.html">in_top_left</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">annotation_transform</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The pattern scales beautifully to complex reporting workflows. Consider a situation where you’re generating of slides that each have several charts and a few annotations for each chart. Here we define relative transformation functions for where to put a month to month change and a year to year change relative to the position of a chart.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month2month</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_relative_transformation_function.html">define_relative_transformation_function</a></span><span class="op">(</span></span>
<span>  top_transformation <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">-</span><span class="fl">0.5</span>,</span>
<span>  left_transformation <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">0.13</span>,</span>
<span>  width_transformation <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  height_transformation <span class="op">=</span> <span class="fl">0.25</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">year2year</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_relative_transformation_function.html">define_relative_transformation_function</a></span><span class="op">(</span></span>
<span>  top_transformation <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">-</span><span class="fl">0.3</span>,</span>
<span>  left_transformation <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">0.13</span>,</span>
<span>  width_transformation <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  height_transformation <span class="op">=</span> <span class="fl">0.25</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Notice how these functions encode layout intent rather than hard-coded coordinates. They move up/down and left/right a certain amount. When you need to adjust spacing across all slides, you change the values in just the month2month and year2year definitions and reuse the same code.</p>
<p>This approach transforms slide generation from manually positioning each element to defining transformation rules that express relationships. Your code stops saying “put this text at coordinates (2.3, 4.7)” and starts saying “place monthly change indicators 0.13 inches to the right of and 0.5 inches below the top left of the chart with standard delta dimensions.” The latter is both more maintainable and more semantically meaningful.</p>
</section><section class="level2"><h2 id="building-layout-systems">Building Layout Systems<a class="anchor" aria-label="anchor" href="#building-layout-systems"></a>
</h2>
<p>The combination of base positions, relative transformations, and reusable transformation functions creates a complete layout system. Here’s how it works in practice:</p>
<p>First, you establish base positions using explicit coordinates. Then you define transformation functions that encode your layout rules—the spatial relationships between different element types. Finally, you apply these transformations when adding content to slides.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_pos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/slide-position-helpers.html">in_top_left</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add the chart</span></span>
<span><span class="co"># Add annotations using transformation functions</span></span>
<span><span class="fu"><a href="../reference/add_linked_chart.html">add_linked_chart</a></span><span class="op">(</span><span class="va">...</span>, <span class="va">chart_pos</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_text.html">add_text</a></span><span class="op">(</span></span>
<span>  <span class="st">"Month-over-month change"</span>,</span>
<span>  <span class="va">chart_pos</span> <span class="op">|&gt;</span> <span class="fu">month2month</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_text.html">add_text</a></span><span class="op">(</span></span>
<span>  <span class="st">"Year-over-year change"</span>,</span>
<span>  <span class="va">chart_pos</span> <span class="op">|&gt;</span> <span class="fu">year2year</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>When the base chart position changes—perhaps you need to accommodate a different slide template or adjust spacing—all derived elements move automatically. You’re not hunting through code to update dozens of coordinate pairs; you’re changing one base position and letting the transformation functions handle the rest.</p>
<p>This pattern extends beyond simple offsets. Transformation functions can implement complex logic such as implementing a maximum width for annotations, mirroring positions for right-to-left layouts, or adjusting for rotation. The key is that the layout logic is centralized in transformation functions that can be reused and adjusted independently of the content-adding code. This separation of concerns leads to code that’s easier to read, maintain, and scale across large presentations.</p>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam Hubbs.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
